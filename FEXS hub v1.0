-- Create GUI
local player = game.Players.LocalPlayer
local mouse = player:GetMouse()
local screenGui = Instance.new("ScreenGui", player:WaitForChild("PlayerGui"))
screenGui.Name = "FEXSGUI"

local openButton = Instance.new("TextButton", screenGui)
openButton.Size = UDim2.new(0, 100, 0, 30)
openButton.Position = UDim2.new(0, 10, 0, 10)
openButton.Text = "Open GUI"

-- Main GUI Frame
local mainFrame = Instance.new("Frame", screenGui)
mainFrame.Size = UDim2.new(0, 300, 0, 200)
mainFrame.Position = UDim2.new(0.3, 0, 0.3, 0)
mainFrame.BackgroundColor3 = Color3.fromRGB(40, 40, 40)
mainFrame.Visible = false
mainFrame.Active = true
mainFrame.Draggable = true

-- Title
local title = Instance.new("TextLabel", mainFrame)
title.Size = UDim2.new(1, 0, 0, 30)
title.Text = "FEXS GUI hub"
title.BackgroundColor3 = Color3.fromRGB(60, 60, 60)
title.TextColor3 = Color3.new(1, 1, 1)
title.Font = Enum.Font.SourceSansBold
title.TextSize = 20

-- Speed Button
local speedButton = Instance.new("TextButton", mainFrame)
speedButton.Size = UDim2.new(0, 280, 0, 40)
speedButton.Position = UDim2.new(0, 10, 0, 50)
speedButton.Text = "Change Speed"
speedButton.BackgroundColor3 = Color3.fromRGB(100, 100, 100)
speedButton.TextColor3 = Color3.new(1, 1, 1)

-- ESP Toggle Button
local espButton = Instance.new("TextButton", mainFrame)
espButton.Size = UDim2.new(0, 280, 0, 40)
espButton.Position = UDim2.new(0, 10, 0, 100)
espButton.Text = "Toggle Box ESP"
espButton.BackgroundColor3 = Color3.fromRGB(100, 100, 100)
espButton.TextColor3 = Color3.new(1, 1, 1)

-- Close Button
local closeButton = Instance.new("TextButton", mainFrame)
closeButton.Size = UDim2.new(0, 280, 0, 30)
closeButton.Position = UDim2.new(0, 10, 0, 150)
closeButton.Text = "Close GUI"
closeButton.BackgroundColor3 = Color3.fromRGB(80, 80, 80)
closeButton.TextColor3 = Color3.new(1, 1, 1)

-- Toggle Main GUI
openButton.MouseButton1Click:Connect(function()
	mainFrame.Visible = true
	openButton.Visible = false
end)

closeButton.MouseButton1Click:Connect(function()
	mainFrame.Visible = false
	openButton.Visible = true
end)

-- Speed Change Function
local speedOn = false
speedButton.MouseButton1Click:Connect(function()
	speedOn = not speedOn
	if speedOn then
		player.Character.Humanoid.WalkSpeed = 100
		speedButton.Text = "Reset Speed"
	else
		player.Character.Humanoid.WalkSpeed = 16
		speedButton.Text = "Change Speed"
	end
end)

-- Simple Box ESP
local espOn = false
local espBoxes = {}

local function toggleESP()
	espOn = not espOn

	if espOn then
		for _, plr in pairs(game.Players:GetPlayers()) do
			if plr ~= player and plr.Character and plr.Character:FindFirstChild("HumanoidRootPart") then
				local box = Instance.new("BoxHandleAdornment")
				box.Size = Vector3.new(4, 6, 2)
				box.Color3 = Color3.fromRGB(255, 0, 0)
				box.Transparency = 0.5
				box.AlwaysOnTop = true
				box.ZIndex = 5
				box.Adornee = plr.Character:FindFirstChild("HumanoidRootPart")
				box.Parent = plr.Character
				table.insert(espBoxes, box)
			end
		end
	else
		for _, box in pairs(espBoxes) do
			if box and box.Parent then
				box:Destroy()
			end
		end
		espBoxes = {}
	end
end

espButton.MouseButton1Click:Connect(toggleESP)
