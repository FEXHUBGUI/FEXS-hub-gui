-- Main GUI Script
local player = game.Players.LocalPlayer
local speed = 50
local jumpPower = 50
local flying = false
local bodyVelocity = Instance.new("BodyVelocity")
bodyVelocity.MaxForce = Vector3.new(500000, 500000, 500000)

-- Create ESP
local function createESP(target)
    if target:IsA("Player") then
        local box = Instance.new("BoxHandleAdornment")
        box.Adornee = target.Character:FindFirstChild("Head") or target.Character:FindFirstChild("HumanoidRootPart")
        box.Size = Vector3.new(2, 5, 2)
        box.Color3 = Color3.fromRGB(255, 0, 0)
        box.Transparency = 0.5
        box.Parent = target.Character
    end
end

game.Players.PlayerAdded:Connect(function(player)
    player.CharacterAdded:Connect(function(character)
        wait(1)
        createESP(player)
    end)
end)

-- Speed changer
local function changeSpeed()
    player.Character:WaitForChild("Humanoid").WalkSpeed = speed
end

script.Parent.SpeedButton.MouseButton1Click:Connect(function()
    speed = speed == 50 and 100 or 50
    changeSpeed()
end)

-- Jump power changer
local function changeJumpPower()
    player.Character:WaitForChild("Humanoid").JumpPower = jumpPower
end

script.Parent.JumpButton.MouseButton1Click:Connect(function()
    jumpPower = jumpPower == 50 and 100 or 50
    changeJumpPower()
end)

-- Fly function
local function fly()
    if not flying then
        flying = true
        bodyVelocity.Parent = player.Character:WaitForChild("HumanoidRootPart")
        bodyVelocity.Velocity = Vector3.new(0, 100, 0)
    else
        flying = false
        bodyVelocity:Destroy()
    end
end

script.Parent.FlyButton.MouseButton1Click:Connect(function()
    fly()
end)
